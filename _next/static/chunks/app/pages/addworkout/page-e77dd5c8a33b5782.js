(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{9651:(e,t,i)=>{Promise.resolve().then(i.bind(i,2029))},2029:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i(5155),n=i(2115),s=i(2551);i(1657);let o=()=>{let[e,t]=n.useState({name:"",description:"",durationInMinutes:0,exercises:[],imageURL:"",imageFile:null}),[i,o]=n.useState({name:"",description:"",sets:0,reps:0,imageURL:"",imageFile:null}),l=i=>{t({...e,[i.target.name]:i.target.value})},r=e=>{o({...i,[e.target.name]:e.target.value})},c=a=>{if(console.log(i),""==i.name||""==i.description||0==i.sets||0==i.reps||null==i.imageFile){s.oR.error("Please fill all the fields",{position:"top-center"});return}t({...e,exercises:[...e.exercises,i]})},d=i=>{t({...e,exercises:e.exercises.filter((e,t)=>t!==i)})},p=async e=>{let t=new FormData;t.append("myimage",e);let i=await fetch("".concat("http://localhost:8000","/image-upload/uploadimage"),{method:"POST",body:t});if(!i.ok)return console.log("Failed to upload image"),null;{let e=await i.json();return console.log("Image Upload Success",e),e.imageUrl}},u=async()=>{(await fetch("http://localhost:8000/admin/checklogin",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).ok?console.log("Admin is Authenticated"):(console.log("Admin is not Authenticated"),s.oR.error("You are not logged in",{position:"top-center"}),window.location.href="/adminauth/login")},m=async t=>{if(await u(),console.log(e),""==e.name||""==e.description||0==e.durationInMinutes||null==e.imageFile||0==e.exercises.length){s.oR.error("Please fill all the fields",{position:"top-center"});return}let i={...e};if(e.imageFile){let t=await p(e.imageFile);t&&(i.imageURL=t)}for(let t=0;t<e.exercises.length;t++){let a=e.exercises[t].imageFile;if(a){let e=await p(a);i.exercises[t].imageURL=e}}console.log(e);let a=await fetch("".concat("http://localhost:8000","/workoutplans/workouts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),credentials:"include"});a.ok?(console.log("Workout Plan Saved",await a.json()),s.oR.success("Workout Plan Saved",{position:"top-center"})):(console.error("Failed to save workout plan"),s.oR.error("Failed to save workout plan",{position:"top-center"}))};return(0,a.jsxs)("div",{className:"formpage",children:[(0,a.jsx)("h1",{className:"title",children:"Add Workout"}),(0,a.jsx)("input",{type:"text",placeholder:"Workout Name",name:"name",value:e.name,onChange:l}),(0,a.jsx)("textarea",{placeholder:"Workout Description",name:"description",value:e.description,onChange:i=>{t({...e,description:i.target.value})},rows:5,cols:50}),(0,a.jsx)("label",{htmlFor:"durationInMinutes",children:"Duration In Minutes"}),(0,a.jsx)("input",{type:"number",placeholder:"Workout Duration",name:"durationInMinutes",value:e.durationInMinutes,onChange:l}),(0,a.jsx)("input",{type:"file",placeholder:"Workout Image",name:"workoutImage",onChange:i=>t({...e,imageFile:i.target.files[0]})}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,a.jsx)("h2",{className:"title",children:"Add Exercise To Workout"}),(0,a.jsx)("input",{type:"text",placeholder:"Exercise Name",name:"name",value:i.name,onChange:r}),(0,a.jsx)("textarea",{placeholder:"Exercise Description",name:"description",value:i.description,onChange:e=>{o({...i,description:e.target.value})},rows:5,cols:50}),(0,a.jsx)("label",{htmlFor:"sets",children:"Sets"}),(0,a.jsx)("input",{type:"number",placeholder:"Sets",name:"sets",value:i.sets,onChange:r}),(0,a.jsx)("label",{htmlFor:"reps",children:"Reps"}),(0,a.jsx)("input",{type:"number",placeholder:"Reps",name:"reps",value:i.reps,onChange:r}),(0,a.jsx)("input",{type:"file",placeholder:"Exercise Image",name:"exerciseImage",onChange:e=>o({...i,imageFile:e.target.files[0]})}),(0,a.jsx)("button",{onClick:e=>{c(e)},children:"Add Exercise"})]}),(0,a.jsxs)("div",{className:"exercises",children:[(0,a.jsx)("h1",{className:"title",children:"Exercises"}),e.exercises.map((e,t)=>(0,a.jsxs)("div",{className:"exercise",children:[(0,a.jsx)("h2",{children:e.name}),(0,a.jsx)("p",{children:e.description}),(0,a.jsxs)("p",{children:["Sets: ",e.sets]}),(0,a.jsxs)("p",{children:["Reps: ",e.reps]}),(0,a.jsx)("img",{src:e.imageFile?URL.createObjectURL(e.imageFile):e.imageURL,alt:""}),(0,a.jsx)("button",{onClick:()=>d(t),children:" Delete"})]},t))]}),(0,a.jsx)("button",{onClick:e=>{m(e)},children:"Save Workout"})]})}},1657:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[520,551,441,517,358],()=>t(9651)),_N_E=e.O()}]);